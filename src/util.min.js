WaveSurfer.util={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){Object.keys(n).forEach(function(r){e[r]=n[r]})}),e},debounce:function(e,n,r){var t,i,s,a=function(){s=null,r||e.apply(i,t)};return function(){i=this,t=arguments;var u=r&&!s;clearTimeout(s),(s=setTimeout(a,n))||(s=setTimeout(a,n)),u&&e.apply(i,t)}},min:function(e){var n=1/0;for(var r in e)e[r]<n&&(n=e[r]);return n},max:function(e){var n=-1/0;for(var r in e)e[r]>n&&(n=e[r]);return n},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(e){var n=Object.create(WaveSurfer.Observer),r=new XMLHttpRequest,t=!1;return r.open(e.method||"GET",e.url,!0),r.responseType=e.responseType||"json",r.addEventListener("progress",function(e){n.fireEvent("progress",e),e.lengthComputable&&e.loaded==e.total&&(t=!0)}),r.addEventListener("load",function(e){t||n.fireEvent("progress",e),n.fireEvent("load",e),200==r.status||206==r.status?n.fireEvent("success",r.response,e):n.fireEvent("error",e)}),r.addEventListener("error",function(e){n.fireEvent("error",e)}),r.send(),n.xhr=r,n}},WaveSurfer.Observer={on:function(e,n){this.handlers||(this.handlers={});var r=this.handlers[e];return r||(r=this.handlers[e]=[]),r.push(n),{name:e,callback:n,un:this.un.bind(this,e,n)}},un:function(e,n){if(this.handlers){var r=this.handlers[e];if(r)if(n)for(var t=r.length-1;t>=0;t--)r[t]==n&&r.splice(t,1);else r.length=0}},unAll:function(){this.handlers=null},once:function(e,n){var r=this,t=function(){n.apply(this,arguments),setTimeout(function(){r.un(e,t)},0)};return this.on(e,t)},fireEvent:function(e){if(this.handlers){var n=this.handlers[e],r=Array.prototype.slice.call(arguments,1);n&&n.forEach(function(e){e.apply(null,r)})}}},WaveSurfer.util.extend(WaveSurfer,WaveSurfer.Observer);